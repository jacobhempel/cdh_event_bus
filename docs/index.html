<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OctopOS: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OctopOS
   &#160;<span id="projectnumber">0.6.0</span>
   </div>
   <div id="projectbrief">Data communication bus for SPACE HAUC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OctopOS Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/SpaceHAUC-Command-and-Data-Handling/OctopOS?branch=master"><img src="https://travis-ci.org/SpaceHAUC-Command-and-Data-Handling/OctopOS.svg?branch=master&style=flat" alt="Build Status" class="inline"/>
</a> <a href="https://codecov.io/gh/SpaceHAUC-Command-and-Data-Handling/OctopOS"><img src="https://codecov.io/gh/SpaceHAUC-Command-and-Data-Handling/OctopOS/branch/master/graph/badge.svg?style=flat" alt="codecov" class="inline"/>
</a> <a href="https://github.com/SpaceHAUC-Command-and-Data-Handling/OctopOS/blob/master/LICENSE.txt"><img src="https://img.shields.io/badge/License-AGPL%20v3-blue.svg?style=flat" alt="License: AGPL v3" class="inline"/>
</a> <a href="https://github.com/SpaceHAUC-Command-and-Data-Handling/OctopOS/releases"><img src="http://github-release-version.herokuapp.com/github/SpaceHAUC-Command-and-Data-Handling/OctopOS/release.svg?style=flat" alt="release" class="inline"/>
</a></p>
<h1>OctopOS</h1>
<p>A simple data bus for subsystem communication.</p>
<h2>Introduction</h2>
<p>OctopOS is a data bus designed to make subsystem inter communications as easy as possible. It exposes a publisher subscriber model, however it's tentacles can be extended as needed to include other communication methods.</p>
<p>If you are working on a subsystem for SPACE HAUC then most of the information you will need can be found in the <b>Basic Usage</b> section of this readme.</p>
<h2>Contents</h2>
<ul>
<li><b>Basic Usage</b><ul>
<li>Includes</li>
<li>Publisher</li>
<li>Subscriber</li>
</ul>
</li>
<li><b>Advanced Topics</b><ul>
<li>Calling Modules</li>
<li>Control Flow</li>
<li>Shared Memory Segment</li>
<li>Communication Protocal</li>
</ul>
</li>
<li><b>Further Documentation</b></li>
</ul>
<h2>Basic Usage</h2>
<p>The basic usage of <a class="el" href="classoctopOS.html">octopOS</a> is ment to make inter system communication as easy as possible! This section is designed to show you what you can do.</p>
<h3>Includes</h3>
<p>OctopOS provides a few libraries. The main ones you will be using are the <code>publiher</code> and <code>subscriber</code> libraries. All includes follow the format: </p><div class="fragment"><div class="line"><span class="preprocessor">#include&lt;OctopOS/{lib}.h&gt;</span></div></div><!-- fragment --><p> i.e </p><div class="fragment"><div class="line"><span class="preprocessor">#include&lt;OctopOS/subscriber.h&gt;</span></div></div><!-- fragment --><h3>Publisher</h3>
<p>If you would like to publish data from your subsystem for others to read this is the section for you. To create a publisher you only need to construct an instance of the class: </p><div class="fragment"><div class="line"><a class="code" href="classpublisher.html">publisher&lt;T&gt;</a> pub(<span class="stringliteral">&quot;topic_name&quot;</span>, argv[0]);</div></div><!-- fragment --><p> Since <code>publisher</code> is a templated class <code>T</code> should be they type of data you are trying to publish. This include custome classes and structs.</p>
<p>The first parameter is also important as that is the name of the topic you wish to publis to. you can have multiple publishers to a single topic if you want. The name can not contain spaces.</p>
<p>If you would like to learn more about the <code>argv[0]</code> part refer to the <b>Calling Modules</b> section of this readme. A sample usage would be: </p><div class="fragment"><div class="line"><a class="code" href="classpublisher.html">publisher&lt;int&gt;</a> pub(<span class="stringliteral">&quot;test&quot;</span>, argv[0]);</div></div><!-- fragment --><p>Now that we have a publisher to publish data all we have to do is: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> data = 5;</div><div class="line">pub.publish(data);</div></div><!-- fragment --><p> That is all there is to it! Don't forget to include <code><a class="el" href="publisher_8h.html">publisher.h</a></code> </p><h3>Subscriber</h3>
<p>Ihis section gives instructions on how to read data from a topic using a subscriber. Due to there implementation subscribers require a bit more setup than publishers.</p>
<p>First you will want to create a thread that listens for events from <a class="el" href="classoctopOS.html">octopOS</a>. <b>YOU ONLY NEED ONE OF THESE THREADS FOR ALL SUBSCRIBERS IN THE PROCESS!</b> This is done by: </p><div class="fragment"><div class="line">pthread_t wait_for_subscrber_event;</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (pthread_create(&amp;wait_for_subscrber_event, NULL, <a class="code" href="classsubscriber__manager.html#ae4cb14336860f3c26026e2dbd9562546">subscriber_manager::wait_for_data</a>, NULL)) {</div><div class="line">    exit(-1);  <span class="comment">// or handle the error as you see fit (this is almost always terminal)</span></div><div class="line">}</div></div><!-- fragment --><p>Do not wait for this thread to join as it never will. Once this is complete we can set up our subscribers just like out publishers. First create an instance of the class with: </p><div class="fragment"><div class="line"><a class="code" href="classsubscriber.html">subscriber&lt;T&gt;</a> sub(<span class="stringliteral">&quot;topic_name&quot;</span>, argv[0]);</div></div><!-- fragment --><p>Again this is very similar to <code>publiser</code> where <code>T</code> is the type of data, and the first paramater is the topic name you would like to get data from. If we wanted to subscribe to our topic from the publisher section it would look like: </p><div class="fragment"><div class="line"><a class="code" href="classsubscriber.html">subscriber&lt;int&gt;</a> sub(<span class="stringliteral">&quot;test&quot;</span>, argv[0]);</div></div><!-- fragment --><p>Once we have created a subscriber to get data we simple do: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> x = sub.getData();</div></div><!-- fragment --><p>A note is that this call <b>WILL BLOCK</b> your thread if there is no data to be had. It will unblock once data is available, but is advisable to read data from a secondaty thread so your main thread can continue execution.</p>
<p>Remember to include <code><a class="el" href="subscriber_8h.html">subscriber.h</a></code></p>
<h2>Advanced Topics</h2>
<p>This section is for those who want to understand how <a class="el" href="classoctopOS.html">octopOS</a> works under the hood. If you just want to use <a class="el" href="classoctopOS.html">octopOS</a> see the above <b>Basic Usage</b> section.</p>
<h3>Calling Modules</h3>
<p>When a module is created registered with <a class="el" href="classoctopOS.html">octopOS</a>, it forks and execs the independant binary of that module. It passes the message key that it expects the module to communicate on as <code>argv[0]</code>, that is why you pass <code>argv[0]</code> to the constructor of classes inherited from tentical as it constructs itself on top of this message bus.</p>
<p>All modules, and the number of modules need to be known befor runtime as it stands right now. These are defined in <code><a class="el" href="utility_8h.html">utility.h</a></code> and compiled into the main executable. In the future we hope to eliminate this need.</p>
<h3>Control Flow</h3>
<p>This section aims to talk through the basic flow of the lifetime of a <a class="el" href="classoctopOS.html">octopOS</a> topic. </p><h3>Shared Memory Segment</h3>
<h3>Communication Protocal</h3>
<h2>Full Documentation</h2>
<p>Full documentation is available <a href="https://uml-spacehauc.github.io/OctopOS/">here</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
